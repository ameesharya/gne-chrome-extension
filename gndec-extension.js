(function(e){e.fn.fbWall=function(t){var n=e.extend({},e.fn.fbWall.defaults,t);var r=this;return r.each(function(){function f(e){var n;if(e==s.id){n=t.useAvatarAlternative?t.avatarAlternative:o+e+"/picture?type=square"}else{n=t.useAvatarExternal?t.avatarExternal:o+e+"/picture?type=square"}return n}function l(e){var n,r,i,s,o,u,a,f,l,c;var h=e.indexOf(" ")==-1&&e.substr(4,1)=="-"&&e.substr(7,1)=="-"&&e.substr(10,1)=="T"?true:false;if(h){n=e.substr(0,4);r=parseInt(e.substr(5,1)=="0"?e.substr(6,1):e.substr(5,2))-1;i=e.substr(8,2);s=e.substr(11,2);o=e.substr(14,2);u=Date.UTC(n,r,i,s,o);a=new Date(u)}else{l=e.split(" ");if(l.length!=6||l[4]!="at")return e;c=l[5].split(":");f=c[1].substr(2);o=c[1].substr(0,2);s=parseInt(c[0]);if(f=="pm")s+=12;a=new Date(l[1]+" "+l[2]+" "+l[3]+" "+s+":"+o);a.setTime(a.getTime()-1e3*60*60*7)}i=a.getDate()<10?"0"+a.getDate():a.getDate();r=a.getMonth()+1;r=r<10?"0"+r:r;s=a.getHours();o=a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes();if(t.timeConversion==12){f=s<12?"am":"pm";if(s==0)s==12;else if(s>12)s=s-12;if(s<10)s="0"+s;return i+"."+r+"."+a.getFullYear()+" at "+s+":"+o+" "+f}return i+"."+r+"."+a.getFullYear()+" "+t.translateAt+" "+s+":"+o}function c(e){if(!e||e==null||e=="undefined"||typeof e=="undefined")return false;else return true}function h(e){return d(v(p(e)))}function p(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function d(e){return e.replace(/(\r\n)|(\n\r)|\r|\n/g,"<br>")}function v(e){return e.replace(/((http|https|ftp):\/\/[\w?=&.\/-;#~%-]+(?![\w\s?&.\/;#~%"=-]*>))/g,'<a href="$1" target="_blank">$1</a>')}$this=e(this);var t=e.meta?e.extend({},n,$this.data()):n;var i="";var s;var o="https://graph.facebook.com/";r.addClass("fb-wall").addClass("loading").html("");e.ajax({url:o+t.id+"?access_token="+t.accessToken,dataType:"jsonp",success:function(e,t,n){u(e)}});var u=function(n){s=n;if(n==false){r.removeClass("loading").html("The alias you requested do not exist: "+t.id);return false}if(n.error){r.removeClass("loading").html(n.error.message);return false}var i=t.showGuestEntries=="true"||t.showGuestEntries==true?"feed":"posts";e.ajax({url:o+t.id+"/"+i+"?limit="+t.max+"&access_token="+t.accessToken,dataType:"jsonp",success:function(e,t,n){r.removeClass("loading");a(e)}})};var a=function(e){e=e.data;var n=e.length;var o,u,a,f;for(var p=0;p<n;p++){u=e[p].from.id==s.id;a=u&&c(s.link);if(!t.showGuestEntries&&!u)continue;i+=p==0?'<div class="fb-wall-box fb-wall-box-first">':'<div class="fb-wall-box">';i+='<a href="http://www.facebook.com/profile.php?id='+e[p].from.id+'" target="_blank">';i+="</a>";i+='<div class="fb-wall-data">';i+='<span class="fb-wall-message">';i+='<a href="http://www.facebook.com/profile.php?id='+e[p].from.id+'" class="fb-wall-message-from" target="_blank">'+e[p].from.name+"</a> ";if(c(e[p].message))i+=h(e[p].message);i+="</span>";if(c(e[p].picture)||c(e[p].link)||c(e[p].caption)||c(e[p].description)){i+=c(e[p].picture)?'<div class="fb-wall-media">':'<div class="fb-wall-media fb-wall-border-left">';if(c(e[p].picture)){if(c(e[p].link))i+='<a href="'+e[p].link+'" target="_blank" class="fb-wall-media-link">';i+='<img class="fb-wall-picture" src="'+e[p].picture+'" />';if(c(e[p].link))i+="</a>"}i+='<div class="fb-wall-media-container">';if(c(e[p].name))i+='<a class="fb-wall-name" href="'+e[p].link+'" target="_blank">'+e[p].name+"</a>";if(c(e[p].caption))i+='<a class="fb-wall-caption" href="http://'+e[p].caption+'" target="_blank">'+e[p].caption+"</a>";if(c(e[p].properties)){for(var d=0;d<e[p].properties.length;d++)i+=d==0?"<div>"+l(e[p].properties[d].text)+"</div>":"<div>"+e[p].properties[d].text+"</div>"}if(c(e[p].description)){f=h(e[p].description);if(f.length>299)f=f.substr(0,f.lastIndexOf(" "))+" ...";i+='<span class="fb-wall-description">'+f+"</span>"}i+="</div>";i+="</div>"}i+='<span class="fb-wall-date">';if(c(e[p].icon))i+='<img class="fb-wall-icon" src="'+e[p].icon+'" title="'+e[p].type+'" alt="" />';i+=l(e[p].created_time)+"</span>";i+="</div>";i+='<div class="fb-wall-clean"></div>';i+="</div>"}if(n==0){i+='<div class="fb-wall-box-first">';i+='<div class="fb-wall-data">';i+='<span class="fb-wall-message"><span class="fb-wall-message-from">'+s.name+"</span> "+t.translateErrorNoData+"</span>";i+="</div>";i+="</div>"}r.hide().html(i).fadeIn(700)}})};e.fn.fbWall.defaults={id:"neosmart.gmbh",max:10,showComments:false,showGuestEntries:false,translateAt:"at",translateLikeThis:"like this",translateLikesThis:"likes this",translateErrorNoData:"has not shared any information.",translatePeople:"people",timeConversion:24,useAvatarAlternative:false,useAvatarExternal:false,accessToken:""}})(jQuery)